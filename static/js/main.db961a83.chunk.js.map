{"version":3,"sources":["../../src/ux/Webcam.js","../../src/hook/useWebcam.js","App.js","../../src/hook/useLocalStorage.js","../../src/hook/useInterval.js","index.js"],"names":["flipHorizontal","ref","useRef","useState","id","style","setStyle","videoRef","picBase64","setPicBase64","useEffect","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","requestAnimationFrame","update","err0r","console","error","event","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","toDataURL","slice","useWebcam","newStyle","_newStyle","transform","React","autoPlay","App","key","defaultValue","item","window","localStorage","getItem","existingValue","JSON","parse","setItem","stringify","storedValue","setStoredValue","value","newValue","Function","useLocalStorage","state","setState","count","setCount","camFlip","setCamFlip","callback","delay","savedCallback","setInterval","clearInterval","useInterval","href","onChange","E","target","type","Webcam","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.db961a83.chunk.js","sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\r\n\r\nimport { useWebcam } from 'react-confection'\r\n\r\n\r\nexport default function({\r\n  flipHorizontal=false,\r\n}) {\r\n  const ref = useRef(null)\r\n\r\n  const [style, setStyle] = useState({id:0})\r\n\r\n  const webcam = useWebcam(ref)\r\n\r\n\r\n  useEffect(() => {\r\n    if (style) {\r\n      let newStyle = style\r\n\r\n      if (!newStyle?.id) newStyle = {}\r\n      \r\n      \r\n      if (flipHorizontal) {\r\n        newStyle.transform = 'scale(-1, 1)'\r\n      }\r\n      \r\n\r\n      setStyle(newStyle)\r\n    }\r\n\r\n    return () => {\r\n      setStyle({id:0})\r\n    }\r\n  }, [flipHorizontal])\r\n\r\n\r\n  return (\r\n    <video\r\n      autoPlay={true}\r\n      ref={ref}\r\n      style={style}\r\n    ></video>\r\n  )\r\n}\r\n","import React, {useEffect, useState} from 'react'\r\n\r\n\r\nexport default function useWebcam(videoRef) {\r\n  const [picBase64, setPicBase64] = useState('')\r\n\r\n\r\n  useEffect(() => {\r\n    if (navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices.getUserMedia({ video: true })\r\n        .then(function (stream) {\r\n          videoRef.current.srcObject = stream\r\n\r\n          requestAnimationFrame(()=>{\r\n            update()\r\n          })\r\n        })\r\n        .catch(function (err0r) {\r\n          console.error(\"Something went wrong!\", err0r);\r\n        });\r\n    }\r\n  \r\n    // return () => {\r\n    //   videoRef?.current?.srcObject = null;\r\n    // }\r\n  }, [])\r\n\r\n\r\n  const update = event=>{\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = videoRef.current.videoWidth;\r\n    canvas.height = videoRef.current.videoHeight;\r\n    canvas.getContext('2d').drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\r\n    setPicBase64(canvas.toDataURL().slice('data:image/png;base64,')[1])\r\n  }\r\n\r\n\r\n  return {picBase64, update}\r\n}","import React, {useState} from 'react'\n\nimport {useLocalStorage} from \"react-confection\";\nimport {useInterval} from \"react-confection\";\nimport {Webcam} from 'react-confection'\n\nimport 'react-confection/dist/index.css'\n\n\nconst App = () => {\n  const [state, setState] = useLocalStorage('test', 'value')\n\n  const [count, setCount] = useState(0)\n  const [camFlip, setCamFlip] = useState(false)\n\n\n  useInterval(()=>{\n    setCount(count+1)\n  }, 1234)\n\n\n  return <>\n    <h1>ðŸ˜„ react-confection ðŸ˜„</h1>\n\n    <h4>made using <a href=\"https://www.npmjs.com/package/create-react-library\">create-react-library</a></h4>\n\n    <p>\n      <em>react-confection</em> is a cornucopia of hooks and components that I need/like/want in my projects.\n    </p>\n\n\n    <h2> useLocalStorage </h2>\n    <label>\n      Change the value and refresh the page\n      <input \n        onChange={E=>setState(E.target.value)}\n        value={state}\n        type=\"text\" \n      />\n    </label>\n\n\n    <h2> useInterval </h2>\n    <p>\n      Just a perpetual timer that snuggles with React.  This one updates a counter every 1,234ms.\n      <br />\n      Count: {count}\n    </p>\n\n\n    <h2> WebCam / useWebcam</h2>\n    <label>\n      Flip horizontal?\n      <input\n        onChange={E=>setCamFlip(!camFlip)}\n        type=\"checkbox\"\n        value={camFlip}\n      />\n    </label>\n    <Webcam \n      flipHorizontal={camFlip}\n    />\n  </> \n}\n\n\nexport default App","import {useState} from 'react'\r\n\r\nfunction useLocalStorage(key, defaultValue) {\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    const item = window.localStorage.getItem(key)\r\n\r\n    try {\r\n      const existingValue = JSON.parse(item)  // if item exists, use it\r\n      \r\n      if (existingValue) {\r\n        return existingValue\r\n      } else {\r\n        window.localStorage.setItem(key, JSON.stringify(defaultValue)) // if it's non-existent, setup and return the value\r\n        return defaultValue\r\n      }\r\n    } catch (error) {\r\n      window.localStorage.setItem(key, JSON.stringify(defaultValue))\t// on error we cleanup the value\r\n      return defaultValue      \r\n    }\r\n  })\r\n\r\n  const setValue = value => {\r\n    try {\r\n      const newValue = value instanceof Function ? value(storedValue) : value;\t// mimic useState API\r\n      setStoredValue(newValue);\r\n      window.localStorage.setItem(key, JSON.stringify(newValue));\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  return [storedValue, setValue]\r\n}\r\n\r\nexport default useLocalStorage","import React, { useEffect, useRef } from 'react';\r\n\r\n\r\nexport default function useInterval(callback, delay=1000) {\r\n  const savedCallback = useRef()\r\n  const id = useRef()\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n\r\n    if (delay !== null) {\r\n      id.current = setInterval(tick, delay);\r\n      return () => clearInterval(id.current);\r\n    }\r\n  }, [delay]);\r\n\r\n  return function() {\r\n    clearInterval(id.current)\r\n    // console.log('interval cleared', id.current)\r\n  }\r\n}","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}